(this["webpackJsonpodin-book-frontend"]=this["webpackJsonpodin-book-frontend"]||[]).push([[0],{222:function(e,t,n){},346:function(e,t,n){},350:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(53),s=n.n(i),r=(n(222),n(27)),c=n(5),o=n(54),l=n(15),d=n(427),u=n(423),j=n(426),b=n(82),x=n(422),h=n(408),m=n(424),p=n(176),f=n.n(p).a.create({baseURL:"https://odin-book-backend.herokuapp.com/"}),O=n(432),g=n(407),_=n(436),v=n(434),k=n(435),C=n(1),y=function(e){var t=e.dialogOpen,n=e.toggleDialog,a=e.handleDelete;return Object(C.jsxs)(O.a,{sx:{backgroundColor:"rgb(23, 24, 25)"},open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(C.jsx)(g.a,{id:"alert-dialog-title",children:"Delete account"}),Object(C.jsx)(v.a,{children:Object(C.jsx)(k.a,{id:"alert-dialog-description",children:"Are you sure you want to delete your OdinBook account?"})}),Object(C.jsxs)(_.a,{children:[Object(C.jsx)(x.a,{onClick:a,variant:"contained",color:"error",children:"Delete"}),Object(C.jsx)(x.a,{onClick:n,variant:"contained",children:"Cancel"})]})]})},S=function(e){var t=e.user,n=e.setUser,i=Object(a.useState)(""),s=Object(c.a)(i,2),r=s[0],o=s[1],p=Object(a.useState)(!1),O=Object(c.a)(p,2),g=O[0],_=O[1],v=Object(l.f)();Object(a.useEffect)((function(){t&&o("".concat(t.first_name[0]," ").concat(t.last_name[0]))}),[t]);var k=function(){_(!g)};return Object(C.jsxs)(d.a,{maxWidth:"x1",sx:{minHeight:"100vh",marginTop:"10px"},children:[Object(C.jsx)(u.a,{container:!0,spacing:2,sx:{justifyContent:"center"},children:Object(C.jsx)(u.a,{item:!0,xs:12,md:6,children:Object(C.jsxs)(j.a,{sx:{textAlign:"center",margin:"0 5px 20px 5px"},children:[Object(C.jsx)(b.a,{variant:"h5",children:"My Account"}),Object(C.jsx)(h.a,{sx:{borderRadius:"50%",height:"150px",width:"150px",border:"1px solid black",marginBottom:20,marginTop:5,marginLeft:"auto",marginRight:"auto"},children:Object(C.jsx)(m.a,{alt:"".concat(t.first_name," ").concat(t.last_name),src:t.profile_pic?t.profile_pic:"",sx:{height:"150px",width:"150px"},children:t.profile_pic?null:r})}),Object(C.jsx)(x.a,{variant:"contained",onClick:k,sx:{marginBottom:"10px"},children:"Delete account"})]})})}),Object(C.jsx)(y,{dialogOpen:g,toggleDialog:k,handleDelete:function(){_(!1),n(""),v("/login"),f.delete("/users/".concat(t.id))}})]})},P=n(32),w=n(14),q=n(21),L=n.n(q),R=n(244),E=function(e){return e.sort((function(e,t){return new Date(t.post_timestamp)-new Date(e.post_timestamp)}))},D=function(e){var t=e.posts,n=e.setPosts,a=e.user,i=e.skip,s=e.setLoadingPosts,r=(e.userFriends,e.setUserFriends),c=e.friendRequests,o=e.setFriendRequests,l=function(){0===i?(s(!0),f.get("/posts/?skip=".concat(i),{data:{skip:i}}).then((function(e){n(E(Object(w.a)(e.data.posts))),0===i&&s(!1)}))):f.get("/posts/?skip=".concat(i),{data:{skip:i}}).then((function(e){n(E([].concat(Object(w.a)(t),Object(w.a)(e.data.posts)))),0===i&&s(!1)}))},d=function(){var e=Object(P.a)(L.a.mark((function e(a,i,s){var r,c,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=12;break}return(r=new R).append("post_title",a),r.append("post_content",i),r.append("post_img",s),e.next=7,f.post("/posts/",r);case 7:c=e.sent,o=[].concat(Object(w.a)(t),[c.data.post]),n(E(o)),e.next=13;break;case 12:f.post("/posts/",{post_title:a,post_content:i}).then((function(e){var a=[].concat(Object(w.a)(t),[e.data.post]);n(E(a))}));case 13:case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(P.a)(L.a.mark((function e(a,i,s,r){var c,o,l,d,u;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/posts/".concat(a));case 2:if(c=e.sent,o={post_title:i,post_content:s,post_likes:c.post_likes,post_comments:c.post_comments,post_img:c.post_img},!r){e.next=14;break}return(l=new R).append("post_img",r),e.next=9,f.post("/posts/".concat(a),l,o);case 9:d=e.sent,u=[].concat(Object(w.a)(t),[d.data.post]),n(E(u)),e.next=15;break;case 14:f.post("/posts/".concat(a),o).then((function(e){var a=[].concat(Object(w.a)(t),[e.data.post]);n(E(a))}));case 15:case 16:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}(),j=function(){var e=Object(P.a)(L.a.mark((function e(t,n,a){var i,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/posts/".concat(t,"/comments/").concat(n));case 2:i=e.sent,s={comment_content:a,related_post:i.related_post,comment_likes:i.comment_likes},f.post("/posts/".concat(t,"/comments/").concat(n),s).then((function(e){l()}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return{getPosts:l,handlePostSend:d,handlePostEdit:u,handleLikePost:function(e){f.put("/posts/".concat(e,"/like")).then((function(i){var s=Object(w.a)(t),r=s.findIndex((function(t){return t._id===e}));s[r].post_likes.includes(a.id)?s[r].post_likes=s[r].post_likes.filter((function(e){return e!==a.id})):s[r].post_likes.push(a.id),n(E(s))}))},handlePostDelete:function(e){f.delete("/posts/".concat(e)).then((function(a){var i=Object(w.a)(t).filter((function(t){return t._id!==e}));n(E(i))}))},handleCommentSend:function(e,t){f.post("/posts/".concat(e,"/comments"),{comment_content:t}).then((function(e){l()}))},handleCommentEdit:j,handleCommentDelete:function(e,t){f.delete("/posts/".concat(e,"/comments/").concat(t)).then((function(e){l()}))},handleLikeComment:function(e,i){f.put("/posts/".concat(e,"/comments/").concat(i,"/like")).then((function(s){var r=Object(w.a)(t),c=r.findIndex((function(t){return t._id===e})),o=r[c].post_comments.findIndex((function(e){return e._id===i}));r[c].post_comments[o].comment_likes.includes(a.id)?r[c].post_comments[o].comment_likes=r[c].post_comments[o].comment_likes.filter((function(e){return e!==a.id})):r[c].post_comments[o].comment_likes.push(a.id),n(E(r))}))},handleAcceptRequest:function(e){f.put("/users/accept",{target_userId:e}).then((function(t){r(t.data.user.friend_list);var n=c.filter((function(t){return t._id!==e}));o(n)}))},handleDenyRequest:function(e){f.delete("/users/deny",{data:{target_userId:e}}).then((function(t){var n=c.filter((function(t){return t._id!==e}));o(n)}))}}},F=function(e){var t=e.user,n=Object(a.useState)(""),i=Object(c.a)(n,2),s=i[0],r=i[1];return Object(a.useEffect)((function(){t&&r("".concat(t.first_name[0]," ").concat(t.last_name[0]))}),[t]),Object(C.jsx)(m.a,{alt:"".concat(t.first_name," ").concat(t.last_name),src:t.profile_pic?t.profile_pic:"",children:t.profile_pic?null:s})},I=n(417),T=n(101),A=n.n(T),U=n(409),W=(n(87),function(e){var t=e.user,n=e.handlePostSend,i=e.getPosts,s=Object(a.useState)(""),r=Object(c.a)(s,2),o=r[0],l=r[1],d=Object(a.useState)(""),u=Object(c.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!1),m=Object(c.a)(h,2),p=m[0],f=m[1],O=Object(a.useState)(null),g=Object(c.a)(O,2),_=g[0],v=g[1],k=Object(a.useState)(null),y=Object(c.a)(k,2),S=y[0],w=y[1],q=function(e){"Enter"===e.key&&R()},R=function(){var e=Object(P.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(o,j,_);case 2:b(""),l(""),f(!1),v(null),w(null),i();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){f(!p)};return t?Object(C.jsxs)(U.a,{sx:{marginBottom:"8px",minHeight:"25vh","& .MuiTextField-root":{m:1,width:"97%",maxWidth:"100%"}},children:[Object(C.jsxs)(U.a,{sx:{margin:"0px 8px 0px 8px",paddingTop:"8px"},children:[Object(C.jsx)(F,{user:t}),Object(C.jsx)(I.a,{fullWidth:!0,sx:{display:"block",marginTop:"2px"},id:"outlined-multiline-static",placeholder:"Post title here",onKeyPress:q,onChange:function(e){return l(e.target.value)},value:o}),Object(C.jsx)(I.a,{fullWidth:!0,sx:{display:"block",marginBottom:"2px"},id:"outlined-multiline-static",multiline:!0,rows:2,placeholder:"Enter your post here",onKeyPress:q,onChange:function(e){return b(e.target.value)},value:j}),p?Object(C.jsx)(x.a,{variant:"contained",type:"reset",onClick:function(){v(null),w(null),E()},children:"Cancel adding image"}):Object(C.jsx)(x.a,{sx:{margin:"8px",position:"relative"},variant:"contained",startIcon:Object(C.jsx)(A.a,{}),onClick:E,size:"small",children:"Add image"})]}),Object(C.jsx)(U.a,{children:p?Object(C.jsxs)("div",{children:[S?Object(C.jsx)("div",{children:Object(C.jsx)("img",{src:S,width:"100%",alt:"Preview"})}):Object(C.jsx)("div",{children:Object(C.jsx)(I.a,{variant:"standard",type:"file",onChange:function(e){return function(e){v(e.target.files[0]),w(URL.createObjectURL(e.target.files[0]))}(e)},name:"post_img",id:"post_img"})}),Object(C.jsx)(x.a,{sx:{margin:"8px",position:"relative"},variant:"contained",type:"submit",onClick:R,children:"Submit"})]}):null})]}):Object(C.jsx)("div",{children:"Loading..."})}),z=n(418),B=(n(87),function(e){var t=e.user,n=e.postId,i=e.targetComment,s=e.handleCommentEdit,r=(e.getPosts,Object(a.useState)(i.comment_content)),o=Object(c.a)(r,2),l=o[0],d=o[1],u=function(){var e=Object(P.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=4;break}return e.next=3,s(n,i._id,l);case 3:d("");case 4:case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(C.jsx)(h.a,{sx:{margin:"8px",width:"90%",maxWidth:"100%"},children:Object(C.jsx)(I.a,{fullWidth:!0,variant:"outlined",placeholder:"Enter you comment here",onKeyPress:u,onChange:function(e){return d(e.target.value)},value:l})}):Object(C.jsx)("div",{children:"Loading..."})}),H=n(428),N=n(104),M=n.n(N),K=n(103),J=n.n(K),G=n(102),Q=n.n(G),V=function(e){var t=e.user,n=e.comment,i=e.handleLikeComment,s=e.handleCommentEdit,r=e.handleCommentDelete,o=e.postId,l=e.getPosts,d=Object(a.useState)(!1),u=Object(c.a)(d,2),j=u[0],x=u[1];return Object(C.jsxs)(h.a,{sx:{width:"100%",display:"flex",flexDirection:"column",margin:"8px",paddingTop:"8px"},children:[Object(C.jsxs)(h.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},children:[Object(C.jsx)(F,{user:n.comment_author}),Object(C.jsxs)(h.a,{sx:{flexDirection:"column",marginLeft:"8px"},children:[Object(C.jsxs)(b.a,{variant:"body2",children:[n.comment_author.first_name," ",n.comment_author.last_name]}),Object(C.jsx)(b.a,{variant:"caption",children:Object(z.a)(new Date(n.comment_timestamp),new Date,{addSuffix:!0})})]}),t.id===n.comment_author._id&&Object(C.jsx)("div",{children:j?Object(C.jsx)(h.a,{children:Object(C.jsx)(B,{user:t,postId:n.related_post,targetComment:n,handleCommentEdit:s,getPosts:l})}):Object(C.jsxs)(h.a,{sx:{marginLeft:"57vh",display:"inline"},children:[Object(C.jsx)(H.a,{"aria-label":"Edit comment",onClick:function(){x(!j)},children:Object(C.jsx)(Q.a,{fontSize:"small"})}),Object(C.jsx)(H.a,{"aria-label":"Delete comment",onClick:function(){return r(o,n._id)},children:Object(C.jsx)(J.a,{fontSize:"small"})})]})})]}),Object(C.jsx)(b.a,{variant:"body2",children:n.comment_content}),Object(C.jsxs)(h.a,{children:[Object(C.jsx)(b.a,{variant:"body2",children:1===n.comment_likes.length?"1 like":"".concat(n.comment_likes.length," likes")}),Object(C.jsx)(H.a,{"aria-label":"like comment",size:"small",onClick:function(){return i(o,n._id)},children:Object(C.jsx)(M.a,{fontSize:"inherit"})})]})]})},Y=(n(87),function(e){var t=e.postId,n=e.user,i=e.handleCommentSend,s=(e.getPosts,Object(a.useState)("")),r=Object(c.a)(s,2),o=r[0],l=r[1],d=function(){var e=Object(P.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.key){e.next=4;break}return e.next=3,i(t,o);case 3:l("");case 4:case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(C.jsxs)(h.a,{sx:{margin:"8px",width:"90%",maxWidth:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start"},children:[Object(C.jsx)(F,{user:n}),Object(C.jsx)(I.a,{sx:{marginLeft:"8px"},fullWidth:!0,variant:"outlined",placeholder:"Enter you comment here",onKeyPress:d,onChange:function(e){return l(e.target.value)},value:o})]}):Object(C.jsx)("div",{children:"Loading..."})}),X=function(e){var t=e.post,n=e.showCommentForm,a=e.user,i=e.handleCommentSend,s=e.handleCommentEdit,r=e.handleCommentDelete,c=e.handleLikeComment,o=e.getPosts;return Object(C.jsxs)("div",{children:[t.post_comments.map((function(e){return Object(C.jsx)("div",{children:Object(C.jsx)(V,{user:a,comment:e,handleLikeComment:c,handleCommentEdit:s,handleCommentDelete:r,postId:t._id,getPosts:o})},e._id)})),n?Object(C.jsx)(Y,{user:a,handleCommentSend:i,postId:t._id,getPosts:o}):null]})},Z=(n(87),function(e){var t=e.user,n=e.targetPost,i=e.handlePostEdit,s=e.getPosts,r=Object(a.useState)(n.post_title),o=Object(c.a)(r,2),l=o[0],d=o[1],u=Object(a.useState)(n.post_content),j=Object(c.a)(u,2),b=j[0],m=j[1],p=Object(a.useState)(!1),f=Object(c.a)(p,2),O=f[0],g=f[1],_=Object(a.useState)(null),v=Object(c.a)(_,2),k=v[0],y=v[1],S=Object(a.useState)(n.post_img),w=Object(c.a)(S,2),q=w[0],R=w[1],E=function(e){"Enter"===e.key&&D()},D=function(){var e=Object(P.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(n._id,l,b,k);case 2:m(""),d(""),g(!1),y(null),R(null),s();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(C.jsxs)(h.a,{sx:{marginBottom:"8px",minHeight:"25vh","& .MuiTextField-root":{m:1,width:"97%",maxWidth:"100%"}},children:[Object(C.jsxs)(h.a,{sx:{margin:"0px 8px 0px 8px",paddingTop:"8px"},children:[Object(C.jsx)(I.a,{fullWidth:!0,sx:{display:"block",marginTop:"2px"},id:"outlined-multiline-static",placeholder:"Post title here",onKeyPress:E,onChange:function(e){return d(e.target.value)},value:l}),Object(C.jsx)(I.a,{fullWidth:!0,sx:{display:"block",marginBottom:"2px"},id:"outlined-multiline-static",multiline:!0,rows:2,placeholder:"Enter your post here",onKeyPress:E,onChange:function(e){return m(e.target.value)},value:b}),O?Object(C.jsx)(x.a,{variant:"contained",type:"reset",onClick:function(){y(null),R(null)},children:"Cancel adding image"}):Object(C.jsx)(x.a,{variant:"contained",startIcon:Object(C.jsx)(A.a,{}),onClick:function(){g(!O)},children:"Add image/Change image"})]}),Object(C.jsx)("div",{children:O?Object(C.jsxs)("div",{children:[q?Object(C.jsx)("div",{children:Object(C.jsx)("img",{src:q,width:"100%",alt:"Preview"})}):Object(C.jsx)("div",{children:Object(C.jsx)(I.a,{variant:"standard",type:"file",onChange:function(e){return function(e){y(e.target.files[0]),R(URL.createObjectURL(e.target.files[0]))}(e)},name:"post_img",id:"post_img"})}),Object(C.jsx)(x.a,{variant:"contained",type:"submit",onClick:D,children:"Confirm changes"})]}):null})]}):Object(C.jsx)("div",{children:"Loading..."})}),$=n(179),ee=n.n($),te=function(e){var t=e.user,n=e.post,i=e.handlePostEdit,s=e.handlePostDelete,r=e.handleCommentSend,o=e.handleCommentEdit,d=e.handleCommentDelete,u=e.handleLikePost,j=e.handleLikeComment,m=e.getPosts,p=Object(a.useState)(!1),f=Object(c.a)(p,2),O=f[0],g=f[1],_=Object(a.useState)(!1),v=Object(c.a)(_,2),k=v[0],y=v[1],S=Object(l.f)();return Object(C.jsxs)(h.a,{sx:{width:"100%",display:"flex",flexDirection:"column",margin:"8px",paddingTop:"8px"},children:[Object(C.jsxs)(h.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},children:[Object(C.jsx)(F,{user:n.post_author}),Object(C.jsxs)(h.a,{sx:{flexDirection:"column",marginLeft:"8px"},children:[Object(C.jsx)(b.a,{variant:"body1",onClick:function(){S("/users/".concat(n.post_author._id))},children:"".concat(n.post_author.first_name," ").concat(n.post_author.last_name)}),Object(C.jsx)(b.a,{variant:"body2",children:Object(z.a)(new Date(n.post_timestamp),new Date,{addSuffix:!0})})]}),t.id===n.post_author._id&&Object(C.jsx)("div",{children:k?Object(C.jsx)(h.a,{children:Object(C.jsx)(Z,{user:t,targetPost:n,handlePostEdit:i,getPosts:m})}):Object(C.jsxs)(h.a,{sx:{marginLeft:"56vh",display:"inline"},children:[Object(C.jsx)(H.a,{"aria-label":"Edit post",onClick:function(){y(!k)},children:Object(C.jsx)(Q.a,{fontSize:"small"})}),Object(C.jsx)(H.a,{"aria-label":"Delete post",onClick:function(){return s(n._id)},children:Object(C.jsx)(J.a,{fontSize:"small"})})]})})]}),Object(C.jsx)("div",{children:Object(C.jsx)(b.a,{variant:"body1",children:n.post_title})}),Object(C.jsx)("div",{children:Object(C.jsx)(b.a,{variant:"body1",children:n.post_content})}),Object(C.jsx)("div",{children:n.post_img&&Object(C.jsx)("img",{src:n.post_img,width:"100%",alt:"Post attachment"})}),Object(C.jsx)(b.a,{variant:"subtitle2",children:1===n.post_likes.length?"1 like":"".concat(n.post_likes.length," likes")}),Object(C.jsxs)(h.a,{sx:{margin:"8px 0 8px 0"},children:[Object(C.jsx)(x.a,{variant:"outlined",startIcon:Object(C.jsx)(M.a,{}),onClick:function(){return u(n._id)},children:"Like"}),Object(C.jsx)(x.a,{variant:"outlined",startIcon:Object(C.jsx)(ee.a,{}),onClick:function(){g(!O)},children:"Comment"})]}),Object(C.jsx)(X,{post:n,showCommentForm:O,user:t,handleCommentSend:r,handleCommentEdit:o,handleCommentDelete:d,handleLikeComment:j,getPosts:m})]})},ne=function(e){var t=e.user,n=e.posts,a=e.handlePostEdit,i=e.handlePostDelete,s=e.handleCommentSend,r=e.handleCommentEdit,c=e.handleCommentDelete,o=e.handleLikePost,l=e.handleLikeComment,d=e.handleScroll,u=e.loading,b=e.getPosts;return u?Object(C.jsx)("div",{children:"Loading..."}):n.length?Object(C.jsx)("div",{onScroll:d,children:n.map((function(e){return Object(C.jsx)(j.a,{children:Object(C.jsx)(te,{post:e,user:t,handlePostEdit:a,handlePostDelete:i,handleCommentSend:s,handleCommentEdit:r,handleCommentDelete:c,handleLikePost:o,handleLikeComment:l,getPosts:b})},e._id)}))}):Object(C.jsx)(j.a,{children:Object(C.jsx)("div",{children:"No posts here"})})},ae=n(438),ie=n(437),se=n(412),re=n(439),ce=n(421),oe=n(180),le=n.n(oe),de=n(181),ue=n.n(de),je=n(413),be=function(e){var t=e.friends,n=e.friendReqs,a=e.handleAcceptRequest,i=e.handleDenyRequest,s=Object(l.f)(),r=function(e){s("/users/".concat(e))};return Object(C.jsxs)("div",{children:[Object(C.jsx)(ie.a,{"aria-label":"Friend Requests Received",subheader:Object(C.jsx)(ae.a,{children:"Friend requests received"}),children:n.length>0?n.map((function(e){return Object(C.jsxs)(ce.a,{secondaryAction:Object(C.jsxs)("div",{children:[Object(C.jsx)(H.a,{sx:{color:"success.main"},onClick:function(){return a(e._id)},children:Object(C.jsx)(le.a,{})}),Object(C.jsx)(H.a,{sx:{color:"error.main"},onClick:function(){return i(e._id)},children:Object(C.jsx)(ue.a,{})})]}),children:[Object(C.jsx)(re.a,{onClick:function(){return r(e._id)},children:Object(C.jsx)(F,{user:e})}),Object(C.jsx)(se.a,{primary:"".concat(e.first_name," ").concat(e.last_name)})]},e._id)})):Object(C.jsx)(b.a,{variant:"body1",children:"No friend requests at this moment."})}),Object(C.jsx)(je.a,{}),Object(C.jsx)(ie.a,{"aria-label":"Friends",subheader:Object(C.jsx)(ae.a,{children:"Friends"}),children:t.length>0?t.map((function(e){return Object(C.jsxs)(ce.a,{children:[Object(C.jsx)(re.a,{onClick:function(){return r(e._id)},children:Object(C.jsx)(F,{user:e})}),Object(C.jsx)(se.a,{primary:"".concat(e.first_name," ").concat(e.last_name)})]},e._id)})):Object(C.jsx)(b.a,{variant:"body1",children:"No friends yet!"})})]})},xe=n(414),he=n(184),me=n.n(he),pe=n(185),fe=n.n(pe),Oe=function(e){var t=e.user,n=Object(l.f)();return Object(C.jsx)("div",{children:Object(C.jsxs)(ie.a,{"aria-label":"nav list",children:[Object(C.jsxs)(ce.a,{children:[Object(C.jsx)(re.a,{onClick:function(){return e=t.id,void n("/users/".concat(e));var e},children:Object(C.jsx)(F,{user:t})}),Object(C.jsx)(se.a,{primary:"".concat(t.first_name," ").concat(t.last_name)})]}),Object(C.jsx)(je.a,{}),Object(C.jsxs)(ce.a,{children:[Object(C.jsx)(xe.a,{children:Object(C.jsx)(me.a,{})}),Object(C.jsx)(se.a,{primary:"Friends",onClick:function(){n("/friends")}})]}),Object(C.jsx)(je.a,{}),Object(C.jsxs)(ce.a,{children:[Object(C.jsx)(xe.a,{children:Object(C.jsx)(fe.a,{})}),Object(C.jsx)(se.a,{primary:"Settings",onClick:function(){n("/account")}})]})]})})},ge=function(e){var t=e.user,n=e.setUser,i=Object(a.useState)([]),s=Object(c.a)(i,2),r=s[0],o=s[1],b=Object(a.useState)(!1),x=Object(c.a)(b,2),h=x[0],m=x[1],p=Object(a.useState)([]),O=Object(c.a)(p,2),g=O[0],_=O[1],v=Object(a.useState)([]),k=Object(c.a)(v,2),y=k[0],S=k[1],P=Object(a.useState)(0),w=Object(c.a)(P,2),q=w[0],L=w[1],R=Object(l.f)();t||R("/login");var E=D({posts:r,setPosts:o,user:t,skip:q,setLoadingPosts:m,userFriends:g,setUserFriends:_,friendRequests:y,setFriendRequests:S}),F=E.getPosts,I=E.handlePostSend,T=E.handlePostEdit,A=E.handlePostDelete,U=E.handleLikePost,z=E.handleCommentSend,B=E.handleCommentEdit,H=E.handleCommentDelete,N=E.handleLikeComment,M=E.handleAcceptRequest,K=E.handleDenyRequest;Object(a.useEffect)((function(){F()}),[q]),Object(a.useEffect)((function(){t&&f.get("/users/".concat(t.id)).then((function(e){_(e.data.user.user.friend_list),S(e.data.user.user.friend_req_rec)})).catch((function(e){!e.response||500!==e.response&&401!==e.response||(n(""),R("/login"))}))}),[t]);return Object(C.jsx)(d.a,{maxWidth:"x1",children:Object(C.jsx)("div",{children:Object(C.jsxs)(u.a,{container:!0,spacing:3,children:[Object(C.jsx)(u.a,{item:!0,md:3,sx:{display:{xs:"none",md:"block"},marginTop:"8px"},children:Object(C.jsx)(j.a,{children:Object(C.jsx)(Oe,{user:t})})}),Object(C.jsxs)(u.a,{item:!0,xs:12,md:6,sx:{marginTop:"8px"},children:[Object(C.jsx)(j.a,{children:Object(C.jsx)(W,{user:t,handlePostSend:I,getPosts:F})}),Object(C.jsx)(ne,{user:t,posts:r,handlePostEdit:T,handlePostDelete:A,handleCommentSend:z,handleCommentEdit:B,handleCommentDelete:H,handleLikePost:U,handleLikeComment:N,handleScroll:function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&L(r.length)},loading:h,getPosts:F})]}),Object(C.jsx)(u.a,{item:!0,md:3,sx:{display:{xs:"none",md:"block"},marginTop:"8px"},children:Object(C.jsx)(j.a,{children:Object(C.jsx)(be,{friends:g,friendReqs:y,handleAcceptRequest:M,handleDenyRequest:K})})})]})})})},_e=n(440),ve=n(441),ke=function(e){var t=e.friend;return Object(C.jsx)(j.a,{sx:{backgroundColor:"rgb(32,33,34)",color:"white",margin:"20px 10px",width:"25%",textAlign:"center"},children:Object(C.jsxs)(_e.a,{sx:{display:"flex",alignItems:"center",paddingLeft:"8px"},children:[Object(C.jsx)(F,{user:t}),Object(C.jsx)(ve.a,{children:Object(C.jsxs)(b.a,{variant:"body1",children:[t.first_name," ",t.last_name]})})]})})},Ce=n(442),ye=function(e){var t=e.friend,n=e.handleAcceptRequest,a=e.handleDenyRequest,i=Object(l.f)();return Object(C.jsx)(j.a,{sx:{textAlign:"center",backgroundColor:"rgb(32,33,34)",color:"white",margin:"20px 10px",width:"25%"},children:Object(C.jsxs)(_e.a,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",paddingLeft:"8px"},children:[Object(C.jsx)(F,{user:t}),Object(C.jsx)(ve.a,{onClick:function(){i("/users/".concat(t._id))},sx:{flexDirection:"row",flexWrap:"wrap"},children:Object(C.jsxs)(b.a,{variant:"body1",sx:{flexWrap:"wrap"},children:[t.first_name," ",t.last_name]})}),Object(C.jsxs)(Ce.a,{children:[Object(C.jsx)(x.a,{size:"small",onClick:function(){return n(t._id)},children:"Accept"}),Object(C.jsx)(x.a,{size:"small",onClick:function(){return a(t._id)},children:"Deny"})]})]})})},Se=n(186),Pe=n.n(Se),we=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)([]),r=Object(c.a)(s,2),o=r[0],d=r[1],u=Object(a.useState)(null),j=Object(c.a)(u,2),x=j[0],m=j[1],p=Object(l.f)();Object(a.useEffect)((function(){f.get("/users").then((function(e){d(e.data.users)}))}),[]);return o?Object(C.jsxs)(h.a,{children:[Object(C.jsx)(b.a,{variant:"h5",children:"Search for another user"}),Object(C.jsx)(I.a,{sx:{width:"90%",marginLeft:"8px"},id:"outlined-search",label:"Username",type:"search",onChange:function(e){return i(e.target.value)},onKeyPress:function(e){if("Enter"===e.key){var t=n.split(" "),a=t[0],i=t[1];f.post("/users/search",{userQuery1:a,userQuery2:i}).then((function(e){e.data.user?p("/users/".concat(e.data.user._id)):(m(e.data.error),setTimeout((function(){m(null)}),5e3))}))}},value:n}),Object(C.jsx)(H.a,{onClick:function(){var e=n.split(" "),t=e[0],a=e[1];f.post("/users/search",{userQuery1:t,userQuery2:a}).then((function(e){e.data.user?p("/users/".concat(e.data.user._id)):(m(e.data.error),setTimeout((function(){m(null)}),5e3))}))},sx:{marginLeft:"8px",paddingTop:"9px"},children:Object(C.jsx)(Pe.a,{fontSize:"large"})}),x&&Object(C.jsx)("div",{children:Object(C.jsx)(b.a,{variant:"body1",children:x})})]}):Object(C.jsx)("div",{children:"Loading..."})},qe=function(e){var t=e.user,n=Object(a.useState)([]),i=Object(c.a)(n,2),s=i[0],r=i[1],o=Object(a.useState)([]),l=Object(c.a)(o,2),j=l[0],x=l[1],h=D({userFriends:s,setUserFriends:r,friendRequests:j,setFriendRequests:x}),m=h.handleAcceptRequest,p=h.handleDenyRequest;return Object(a.useEffect)((function(){t&&f.get("/users/".concat(t.id)).then((function(e){r(e.data.user.user.friend_list),x(e.data.user.user.friend_req_rec)}))}),[t]),Object(C.jsx)(d.a,{maxWidth:"x1",sx:{minHeight:"100vh",marginTop:"10px"},children:Object(C.jsx)(u.a,{container:!0,spacing:3,sx:{justifyContent:"center"},children:Object(C.jsxs)(u.a,{item:!0,xs:12,md:9,children:[Object(C.jsx)(we,{}),j?Object(C.jsx)(b.a,{variant:"h5",children:"Friend requests received"}):null,j.length>0?j.map((function(e){return Object(C.jsx)(ye,{friend:e,handleAcceptRequest:m,handleDenyRequest:p},e._id)})):Object(C.jsx)(b.a,{variant:"body1",children:"You do you have any friend requests at this moment."}),Object(C.jsx)(b.a,{variant:"h5",children:"Friends"}),s.length>0?s.map((function(e){return Object(C.jsx)(ke,{friend:e},e._id)})):Object(C.jsx)(b.a,{variant:"body1",children:"No friends yet!"})]})})})},Le=n(415),Re=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),i=n[0],s=n[1],r=Object(a.useState)(""),o=Object(c.a)(r,2),l=o[0],d=o[1],u=Object(a.useState)(""),j=Object(c.a)(u,2),b=j[0],m=j[1],p=Object(a.useState)(""),f=Object(c.a)(p,2),O=f[0],g=f[1],_=Object(a.useState)(""),v=Object(c.a)(_,2),k=v[0],y=v[1],S=Object(a.useState)(""),P=Object(c.a)(S,2),w=P[0],q=P[1],L=Object(a.useState)(""),R=Object(c.a)(L,2),E=R[0],D=R[1];return Object(C.jsxs)(h.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"35ch"},width:{mobile:100,laptop:400},display:"flex",flexDirection:"column",alignItems:"center",margin:"auto"},noValidate:!0,autoComplete:"off",children:[Object(C.jsx)("h3",{children:"Don't have an account? Sign up for free!"}),Object(C.jsx)(I.a,{required:!0,id:"outlined-required",label:"First Name",onChange:function(e){return s(e.target.value)},value:i}),Object(C.jsx)(I.a,{required:!0,id:"outlined-required",label:"Last Name",onChange:function(e){return d(e.target.value)},value:l}),Object(C.jsx)(I.a,{required:!0,id:"outlined-required",label:"Username",onChange:function(e){return m(e.target.value)},value:b}),Object(C.jsx)(I.a,{required:!0,id:"outlined-required",label:"E-mail",onChange:function(e){return D(e.target.value)},value:E}),Object(C.jsx)(I.a,{id:"outlined-password-input",label:"Password",type:"password",onChange:function(e){return g(e.target.value)},value:O}),Object(C.jsx)(I.a,{id:"outlined-password-input",label:"Confirm Password",type:"password",onChange:function(e){return y(e.target.value)},value:k}),Object(C.jsx)(I.a,{id:"outlined-number",label:"Phone Number",type:"number",InputLabelProps:{shrink:!0},onChange:function(e){return q(e.target.value)},value:w}),Object(C.jsx)(Le.a,{direction:"row",spacing:2,children:Object(C.jsx)(x.a,{variant:"contained",onClick:function(){e.handleRegistration(i,l,b,O,E,w,k),s(""),d(""),m(""),g(""),q(""),D(""),y("")},children:"Register"})})]})},Ee=n(136),De=n(425),Fe=Object(Ee.a)(),Ie=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),i=n[0],s=n[1],r=Object(a.useState)(""),o=Object(c.a)(r,2),l=o[0],d=o[1],u=Object(a.useState)(null),j=Object(c.a)(u,2),b=(j[0],j[1],function(){e.handleLogin(i,l),s(""),d("")});return Object(C.jsx)(De.a,{theme:Fe,children:Object(C.jsxs)(h.a,{sx:{"& .MuiTextField-root":{m:1,width:"35ch"},width:{mobile:100,laptop:400},display:"flex",flexDirection:"column",alignItems:"center",margin:"auto"},noValidate:!0,autoComplete:"off",children:[Object(C.jsx)("h1",{children:"Log in to your account"}),Object(C.jsx)(I.a,{required:!0,id:"outlined-required",label:"Username",onChange:function(e){return s(e.target.value)},value:i}),Object(C.jsx)(I.a,{sx:{width:"100%"},id:"outlined-password-input",label:"Password",type:"password",onChange:function(e){return d(e.target.value)},value:l,onKeyPress:function(e){"Enter"===e.key&&b()}}),e.err?e.err.map((function(e){return Object(C.jsx)("div",{children:e.msg})})):null,Object(C.jsx)(Le.a,{direction:"row",spacing:2,children:Object(C.jsx)(x.a,{variant:"contained",onClick:b,children:"Login"})}),Object(C.jsx)(Re,{handleRegistration:e.handleRegistration})]})})},Te=function(e){e.user;var t=e.setUser,n=Object(l.f)(),i=Object(a.useState)([]),s=Object(c.a)(i,2),r=s[0],o=s[1],d=Object(a.useState)([]),u=Object(c.a)(d,2),j=u[0],b=u[1];return Object(C.jsx)(h.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",margin:"auto"},children:Object(C.jsx)(Ie,{handleLogin:function(e,a){f.post("/auth/login",{username:e,password:a}).then((function(e){var a={first_name:e.data.user.first_name,last_name:e.data.user.last_name,username:e.data.user.username,email:e.data.user.email,phone_number:e.data.user.phone_number,profile_pic:e.data.user.profile_pic,id:e.data.user.id,token:e.data.user.token};f.defaults.headers.common.Authorization=e.data.token.token,t(a),n("/")})).catch((function(e){e?(o(e.response.data.errors),setTimeout((function(){o({})}),3e3)):e.response.data.message&&(o([].concat(Object(w.a)(r),[{msg:e.response.data.message}])),setTimeout((function(){o([])}),3e3))}))},handleFBLogin:function(e){f.defaults.headers.common.Authorization="Bearer ".concat(e),f.post("/auth/facebook/token").then((function(a){var i={first_name:a.data.user.first_name,last_name:a.data.user.last_name,username:a.data.user.username,email:a.data.user.email,phone_number:a.data.user.phone_number,profile_pic:a.data.user.profile_pic,id:a.data.user.id,token:"Bearer ".concat(e),facebookId:a.data.user.facebookId};t(i),n("/")}))},handleRegistration:function(e,a,i,s,r,c,o){f.post("/auth/register",{first_name:e,last_name:a,username:i,password:s,email:r,phone_number:c,confirm_password:o}).then((function(e){var a={first_name:e.data.user.first_name,last_name:e.data.user.last_name,username:e.data.user.username,email:e.data.user.email,phone_number:e.data.user.phone_number,profile_pic:e.data.user.profile_pic,id:e.data.user.id,token:e.data.user.token};f.defaults.headers.common.Authorization=e.data.token.token,t(a),n("/")})).catch((function(e){e.response.data.errors?(console.log(e),b(e.response.data.errors),setTimeout((function(){b([])}),3e3)):e.response.data.message&&(console.log(e),b([].concat(Object(w.a)(j),[{msg:e.response.data.message}])),setTimeout((function(){b([])}),3e3))}))}})})},Ae=n(429),Ue=n(430),We=n(193),ze=n(187),Be=n.n(ze),He=n(416),Ne=n(431),Me=function(e){var t=e.user,n=e.setUser,i=Object(l.f)(),s=Object(a.useState)(null),r=Object(c.a)(s,2),o=r[0],u=r[1],j=Object(a.useState)(null),x=Object(c.a)(j,2),m=x[0],p=x[1],f=function(){u(null)},O=function(){p(null)},g=function(){f(),i(t?"/":"/login")};return Object(C.jsx)(Ae.a,{position:"static",sx:{backgroundColor:"#4267B2"},children:Object(C.jsx)(d.a,{maxWidth:"xl",children:Object(C.jsxs)(Ue.a,{disableGutters:!0,children:[Object(C.jsx)(b.a,{variant:"h6",noWrap:!0,component:"div",sx:{mr:2,display:{xs:"none",md:"flex"}},onClick:g,children:"Odinbook"}),Object(C.jsxs)(h.a,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[Object(C.jsx)(H.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit",children:Object(C.jsx)(Be.a,{})}),t?Object(C.jsxs)(We.a,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(o),onClose:f,sx:{display:{xs:"block",md:"none"}},children:[Object(C.jsx)(Ne.a,{onClick:f,children:Object(C.jsx)(b.a,{textAlign:"center",onClick:g,children:"Home"})},"Home"),Object(C.jsx)(Ne.a,{onClick:f,children:Object(C.jsx)(b.a,{textAlign:"center",onClick:function(){f(),i("/friends")},children:"Friends"})},"Friends")]}):null]}),Object(C.jsx)(b.a,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,display:{xs:"flex",md:"none"}},onClick:g,children:"Odinbook"}),t?Object(C.jsxs)(h.a,{sx:{flexGrow:0},children:[Object(C.jsx)(He.a,{title:"Open settings",children:Object(C.jsx)(H.a,{onClick:function(e){p(e.currentTarget)},sx:{p:0},children:Object(C.jsx)(F,{user:t})})}),Object(C.jsxs)(We.a,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(m),onClose:O,children:[Object(C.jsx)(Ne.a,{onClick:O,children:Object(C.jsx)(b.a,{textAlign:"center",onClick:function(){O(),i("/users/".concat(t.id))},children:"Profile"})},"Profile"),Object(C.jsx)(Ne.a,{onClick:O,children:Object(C.jsx)(b.a,{textAlign:"center",onClick:function(){O(),i("/account")},children:"Settings"})},"Settings"),Object(C.jsx)(Ne.a,{onClick:O,children:Object(C.jsx)(b.a,{textAlign:"center",onClick:function(){n(""),O(),i("/login")},children:"Logout"})},"Logout")]})]}):null]})})})},Ke=function(e){var t=e.user,n=e.friendsArr,a=e.friendReqSent,i=e.loggedUser,s=e.handleFriendReq,r=e.friendReqRec,c=e.acceptFriendReq,o=e.denyFriendReq;return Object(C.jsx)("div",{children:n.includes(i.id)?Object(C.jsx)("div",{children:Object(C.jsx)(x.a,{variant:"outlined",children:"Already befriended"})}):a.includes(t._id)?Object(C.jsx)("div",{children:Object(C.jsx)(x.a,{variant:"outlined",children:"Friend request sent"})}):r.includes(t._id)?Object(C.jsxs)("div",{children:[Object(C.jsx)(x.a,{variant:"contained",onClick:function(){return c(t._id)},children:"Accept friend request"}),Object(C.jsx)(x.a,{variant:"contained",onClick:function(){return o(t._id)},children:"Decline friend request"})]}):Object(C.jsx)("div",{children:Object(C.jsx)(x.a,{variant:"contained",onClick:function(){return s(t._id)},children:"Send friend request"})})})},Je=function(e){var t=e.user,n=e.loggedUser,i=e.handleFriendReq,s=e.toggleEditProfile,r=e.toggleEditImage,o=Object(a.useState)(""),d=Object(c.a)(o,2),u=d[0],j=d[1],p=Object(a.useState)([]),O=Object(c.a)(p,2),g=O[0],_=O[1],v=Object(a.useState)([]),k=Object(c.a)(v,2),y=k[0],S=k[1],P=Object(a.useState)([]),w=Object(c.a)(P,2),q=w[0],L=w[1],R=Object(l.f)(),E=D({userFriends:g,setUserFriends:_,friendRequests:q,setFriendRequests:L}),F=E.handleAcceptRequest,I=E.handleDenyRequest;Object(a.useEffect)((function(){t&&j("".concat(t.first_name[0]," ").concat(t.last_name[0]))}),[t]),Object(a.useEffect)((function(){var e=t.friend_list.map((function(e){return e._id}));_(e)}),[t]),Object(a.useEffect)((function(){f.get("/users/".concat(n.id)).then((function(e){var t=e.data.user.user.friend_req_rec.map((function(e){return e._id})),n=e.data.user.user.friend_req_sent.map((function(e){return e._id}));L(t),S(n)}))}),[]);return Object(C.jsxs)(h.a,{sx:{color:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(C.jsx)(h.a,{sx:{borderRadius:"50%",height:"150px",width:"150px",border:"1px solid black",marginBottom:5,marginTop:5,marginLeft:"auto",marginRight:"auto"},children:Object(C.jsx)(m.a,{alt:"".concat(t.first_name," ").concat(t.last_name),src:t.profile_pic?t.profile_pic:"",sx:{height:"150px",width:"150px"},children:t.profile_pic?null:u})}),Object(C.jsxs)(h.a,{children:[Object(C.jsx)(b.a,{variant:"h5",children:"".concat(t.first_name," ").concat(t.last_name)}),t._id!==n.id?Object(C.jsx)(h.a,{sx:{marginBottom:"8px"},children:Object(C.jsx)(Ke,{user:t,friendsArr:g,friendReqSent:y,loggedUser:n,handleFriendReq:i,friendReqRec:q,acceptFriendReq:function(e){F(e),R("/temp"),R.goBack()},denyFriendReq:function(e){I(e),R("/temp"),R.goBack()}})}):Object(C.jsxs)(h.a,{sx:{marginBottom:"8px"},children:[Object(C.jsx)(x.a,{variant:"contained",sx:{margin:"10px 10px"},onClick:s,children:"Edit profile"}),Object(C.jsx)(x.a,{variant:"contained",sx:{margin:"10px 10px"},onClick:r,children:"Change profile picture"})]})]})]})},Ge=n(56),Qe=n(80),Ve=Qe.a({first_name:Qe.b().max(20,"Must be 20 characters or less").required("Required"),last_name:Qe.b().max(20,"Must be 20 characters or less").required("Required"),email:Qe.b().email("Invalid email address").required("Required")}),Ye=function(e){var t=e.user,n=e.toggleEditProfile,a=e.handleProfileUpdate;return Object(C.jsxs)(h.a,{sx:{display:"flex",flexWrap:"wrap"},children:[Object(C.jsx)(b.a,{variant:"h5",children:"Edit profile"}),Object(C.jsx)(Ge.c,{initialValues:{first_name:t.first_name,last_name:t.last_name,email:t.email,phone_number:t.phone_number},validationSchema:Ve,onSubmit:function(e){a(e),n()},children:function(e){return Object(C.jsxs)(Ge.b,{children:[Object(C.jsx)(I.a,Object(o.a)({sx:{marginTop:"8px"},variant:"outlined",id:"first_name",name:"first_name",label:"First name",type:"text"},e.getFieldProps("first_name"))),Object(C.jsx)(Ge.a,{name:"first_name"}),Object(C.jsx)(I.a,Object(o.a)({sx:{marginTop:"8px"},variant:"outlined",id:"last_name",name:"last_name",label:"Last name",type:"text"},e.getFieldProps("last_name"))),Object(C.jsx)(Ge.a,{name:"last_name"}),Object(C.jsx)(I.a,Object(o.a)({sx:{marginTop:"8px"},variant:"outlined",id:"email",name:"email",label:"E-mail",type:"email"},e.getFieldProps("email"))),Object(C.jsx)(Ge.a,{name:"email"}),Object(C.jsx)(I.a,Object(o.a)({sx:{marginTop:"8px"},variant:"outlined",id:"phone_number",name:"phone_number",label:"Phone number",type:"number"},e.getFieldProps("phone_number"))),Object(C.jsx)(Ge.a,{name:"phone_number"}),Object(C.jsx)(x.a,{variant:"contained",type:"submit",sx:{margin:"10px 10px"},onClick:Ge.c.handleSubmit,children:"Confirm changes"}),Object(C.jsx)(x.a,{variant:"contained",type:"reset",sx:{margin:"10px 10px"},onClick:n,children:"Cancel"})]})}})]})},Xe=function(e){e.user;var t=e.toggleEditImage,n=e.handleProfilePicUpdate,i=Object(a.useState)(null),s=Object(c.a)(i,2),r=s[0],o=s[1];return Object(C.jsxs)(h.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[Object(C.jsx)(b.a,{variant:"h5",sx:{margin:"10px 8px"},children:"Update profile picture"}),Object(C.jsx)(I.a,{sx:{margin:8},id:"new_profile_pic",name:"new_profile_pic",type:"file",onChange:function(e){return function(e){o(e.target.files[0])}(e)}}),Object(C.jsx)(x.a,{variant:"contained",sx:{margin:"10px 10px"},onClick:n(r),children:"Confirm changes"}),Object(C.jsx)(x.a,{variant:"contained",sx:{margin:"10px 10px"},onClick:t,children:"Cancel"})]})},Ze=function(e){var t=e.user,n=e.setUser,i=Object(a.useState)(null),s=Object(c.a)(i,2),r=s[0],o=s[1],b=Object(a.useState)([]),x=Object(c.a)(b,2),h=x[0],m=x[1],p=Object(a.useState)(!1),O=Object(c.a)(p,2),g=O[0],_=O[1],v=Object(a.useState)(!1),k=Object(c.a)(v,2),y=k[0],S=k[1],P=Object(a.useState)(!1),w=Object(c.a)(P,2),q=w[0],L=w[1],R=Object(a.useState)(0),E=Object(c.a)(R,2),F=E[0],I=E[1],T=Object(l.g)().userId,A=Object(l.f)(),U=D({posts:h,setPosts:m,user:t,skip:F,setLoadingPosts:_}),z=U.getPosts,B=U.handlePostSend,H=U.handleLikePost,N=U.handleCommentSend,M=U.handleLikeComment;Object(a.useEffect)((function(){z()}),[F]),Object(a.useEffect)((function(){f.get("/users/".concat(T)).then((function(e){o(e.data.user.user)})).catch((function(e){500!==e.response.status&&401!==e.response.status||(n(""),A("/login"))}))}),[t]);var K=function(){S(!y)},J=function(){L(!q)};return r?Object(C.jsx)(d.a,{maxWidth:"x1",sx:{minHeight:"100vh",marginTop:"10px"},children:Object(C.jsxs)(u.a,{container:!0,spacing:3,sx:{justifyContent:"center"},children:[Object(C.jsx)(u.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(j.a,{sx:{textAlign:"center",margin:"0 5px 20px 5px"},children:y?Object(C.jsx)(Ye,{user:r,toggleEditProfile:K,handleProfileUpdate:function(e){f.put("/users/".concat(t.id),e).then((function(e){var t={first_name:e.data.user.first_name,last_name:e.data.user.last_name,email:e.data.user.email,phone_number:e.data.user.phone_number,id:e.data.user._id,token:e.data.token.token,profile_pic:e.data.user.profile_pic};n(t),o(e.data.user.user),f.defaults.headers.common.Authorization=e.data.token.token}))}}):q?Object(C.jsx)(Xe,{user:r,toggleEditImage:J,handleProfilePicUpdate:function(e){var a=new FormData;a.append("new_profile_pic",e),f.post("/users/".concat(t.id,"/profilepic"),a,{}).then((function(e){var t={first_name:e.data.user.user.first_name,last_name:e.data.user.user.last_name,email:e.data.user.user.email,phone_number:e.data.user.user.phone_number,id:e.data.user.user._id,token:e.data.token.token,profile_pic:e.data.user.user.profile_pic};n(t),o(e.data.user.user),J()}))}}):Object(C.jsx)(Je,{user:r,loggedUser:t,handleFriendReq:function(e){f.post("/users/req",{target_userId:e}).then((function(e){f.get("/users/".concat(T)).then((function(e){o(e.data.user.user)}))}))},toggleEditProfile:K,toggleEditImage:J})})}),Object(C.jsx)(u.a,{container:!0,spacing:3,sx:{justifyContent:"center"},children:Object(C.jsxs)(u.a,{item:!0,xs:12,md:6,children:[r._id===t.id?Object(C.jsx)(j.a,{sx:{textAlign:"center",margin:"0 5px 20px 5px"},children:Object(C.jsx)(W,{user:r,handlePostSend:B})}):null,Object(C.jsx)(ne,{user:r,posts:h.filter((function(e){return e.post_author._id===r._id})),handleCommentSend:N,handleLikePost:H,handleLikeComment:M,handleScroll:function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&I(h.length)},loadingPosts:g})]})})]})}):Object(C.jsx)("div",{children:"Loading..."})};n(346);var $e=function(e,t){var n=Object(a.useState)((function(){try{var n=window.localStorage.getItem(e);return"user"===e&&n&&(f.defaults.headers.common.Authorization=JSON.parse(n).token),n?JSON.parse(n):t}catch(a){return console.log(a),t}})),i=Object(c.a)(n,2),s=i[0],r=i[1];return[s,function(t){try{var n=t instanceof Function?t(s):t;r(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]};function et(e){return Object(C.jsx)(b.a,Object(o.a)(Object(o.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:"Copyright \xa9 69"}))}n(173).config();var tt=function(){var e=$e("user",""),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(C.jsxs)("div",{children:[Object(C.jsx)(Me,{user:n,setUser:a}),Object(C.jsxs)(l.c,{children:[Object(C.jsx)(l.a,{exact:!0,path:"/login",element:Object(C.jsx)(Te,{user:n,setUser:a})}),Object(C.jsx)(l.a,{exact:!0,path:"/account",element:Object(C.jsx)(S,{user:n,setUser:a})}),Object(C.jsx)(l.a,{exact:!0,path:"/friends",element:Object(C.jsx)(qe,{user:n})}),Object(C.jsx)(l.a,{exact:!0,path:"/users/:userId",element:Object(C.jsx)(Ze,{user:n,setUser:a})}),Object(C.jsx)(l.a,{exact:!0,path:"/",element:Object(C.jsx)(ge,{user:n,setUser:a})})]}),Object(C.jsx)(et,{sx:{mt:5}})]})},nt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,443)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))};n(173).config(),s.a.render(Object(C.jsx)(r.a,{basename:"/odinbook-frontend",children:Object(C.jsx)(tt,{})}),document.getElementById("root")),nt()}},[[350,1,2]]]);
//# sourceMappingURL=main.3462e216.chunk.js.map